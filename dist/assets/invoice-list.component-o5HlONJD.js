import{s as z}from"./index-BNPcgSDL.js";import{s as D}from"./index-Bua9gdwV.js";import{a as g}from"./axios-CCb-kr4I.js";import{_ as K,r as b,o as M,c as v,a as s,b as t,d as u,i as r,f as m,n as C,k as x,t as O,p as G,g as H,m as J}from"./index-CMyOcGY-.js";import"./index-fTFhSCOV.js";import"./index-D_oWc_cZ.js";import"./index-CHUQlls4.js";import"./index-YSt3OQ2-.js";import"./index-Czgw4Q1G.js";import"./index-BMZz8dJX.js";import"./index-B173WLjv.js";import"./index-BEScgHNf.js";import"./index-BVVSqMWM.js";import"./index-DQVnuBTT.js";import"./index-B7hVmtDm.js";import"./index-Dr0wav3x.js";import"./index-ILA2s2R-.js";import"./index-BzpQufh8.js";import"./index-CA1MwNCX.js";import"./index-MBtfZCGH.js";import"./index-BFqrS509.js";import"./index-DHaBL8G4.js";class k{constructor(i,p,o,c,e,l){this.id=i,this.invoiceNumber=p,this.date=o,this.client=c,this.total=e,this.status=l}}class Q{async getInvoices(){return(await g.get("http://localhost:3000/invoices")).data.map(o=>new k(o.id,o.invoiceNumber,o.date,o.client,o.total,o.status))}async createInvoice(i){const p="http://localhost:3000/invoices",o=Date.now(),c=`F001-${String(o).slice(-6)}`,e=new Date().toISOString().split("T")[0],l=await g.post(p,{id:0,invoiceNumber:c,date:e,client:i.client,total:i.total,status:i.status});return new k(l.data.id,l.data.invoiceNumber,l.data.date,l.data.client,l.data.total,l.data.status)}}const h=_=>(G("data-v-5f15d1c9"),_=_(),H(),_),W={class:"card"},X=h(()=>s("div",{class:"flex justify-content-between align-items-center mb-4"},[s("div",{class:"font-semibold text-xl mb-4"},"Invoice List")],-1)),Y={class:"flex justify-end"},Z=h(()=>s("div",{class:"flex justify-content-start"},[s("div",null,"Add New Invoice")],-1)),P={class:"p-fluid"},ee={class:"field mt-5"},te=h(()=>s("label",{for:"client"},"Client",-1)),ae={key:0,class:"p-invalid"},le={class:"p-field mt-5"},oe=h(()=>s("label",{for:"total"},"Total",-1)),se={key:0,class:"p-invalid"},ne={class:"p-field mt-5"},ie=h(()=>s("label",{for:"status"},"Status",-1)),ce={key:0},de={key:1},ue={key:2},pe={key:0,class:"p-invalid"},ve={class:"flex justify-content-end"},re={__name:"invoice-list.component",setup(_){const i=b([]),p=b([]),o=new Q,c=b(!1),e=b({client:"",total:null,status:""}),l=b(!1),{proxy:N}=J(),V=b([{label:"Pending",value:"pending"},{label:"Paid",value:"paid"},{label:"Canceled",value:"canceled"}]);function R(d){N.$toast.add({severity:"success",summary:"Success",detail:d,life:3e3})}M(async()=>{await I()});async function I(){const d=await o.getInvoices();p.value=d}async function U(){l.value=!0,e.value.client&&e.value.total&&e.value.status&&(await o.createInvoice(e.value),await I(),T(),c.value=!1,R("Invoice Created"))}function T(){e.value={client:"",total:null,status:""},l.value=!1}const j=()=>{c.value=!0},A=d=>{i.value[d.data.id]=!0},$=d=>{delete i.value[d.data.id]};return(d,n)=>{const w=r("pv-button"),f=D,q=z,B=r("pv-input-text"),y=r("pv-float-label"),E=r("pv-input-number"),S=r("pv-tag"),L=r("pv-dropdown"),F=r("pv-dialog");return m(),v("div",W,[X,s("div",Y,[t(w,{label:"New",icon:"pi pi-plus",onClick:j})]),t(q,{expandedRows:i.value,"onUpdate:expandedRows":n[0]||(n[0]=a=>i.value=a),value:p.value,paginator:"",rows:5,"rows-per-page-options":[5,10,20,50],dataKey:"id",onRowExpand:A,onRowCollapse:$,tableStyle:"min-width: 60rem"},{default:u(()=>[t(f,{field:"id",header:"ID"}),t(f,{field:"invoiceNumber",header:"Invoice Number"}),t(f,{field:"date",header:"Date"}),t(f,{field:"client",header:"Client"}),t(f,{field:"total",header:"Total"}),t(f,{field:"status",header:"Status"})]),_:1},8,["expandedRows","value"]),t(F,{visible:c.value,"onUpdate:visible":n[5]||(n[5]=a=>c.value=a),modal:"",class:"p-fluid",header:"Add New Invoice"},{header:u(()=>[Z]),footer:u(()=>[s("div",ve,[t(w,{type:"button",label:"Save",class:"p-button-text",icon:"pi pi-check",onClick:U}),t(w,{type:"button",label:"Cancel",severity:"secondary",class:"p-button-text",icon:"pi pi-times",onClick:n[4]||(n[4]=a=>c.value=!1)})])]),default:u(()=>[s("div",P,[s("div",ee,[t(y,null,{default:u(()=>[te,t(B,{id:"client",modelValue:e.value.client,"onUpdate:modelValue":n[1]||(n[1]=a=>e.value.client=a),class:C({"p-invalid":l.value&&!e.value.client})},null,8,["modelValue","class"]),l.value&&!e.value.client?(m(),v("small",ae,"Client is required.")):x("",!0)]),_:1})]),s("div",le,[t(y,null,{default:u(()=>[oe,t(E,{id:"total",modelValue:e.value.total,"onUpdate:modelValue":n[2]||(n[2]=a=>e.value.total=a),mode:"currency",currency:"USD",class:C({"p-invalid":l.value&&!e.value.total})},null,8,["modelValue","class"]),l.value&&!e.value.total?(m(),v("small",se,"Total is required.")):x("",!0)]),_:1})]),s("div",ne,[t(y,null,{default:u(()=>[ie,t(L,{id:"status",modelValue:e.value.status,"onUpdate:modelValue":n[3]||(n[3]=a=>e.value.status=a),options:V.value,optionLabel:"label",optionValue:"value",placeholder:"Select a Status"},{value:u(a=>[a.value&&a.value.value?(m(),v("div",ce,[t(S,{value:a.value.value},null,8,["value"])])):a.value&&!a.value.value?(m(),v("div",de,[t(S,{value:a.value},null,8,["value"])])):(m(),v("span",ue,O(a.placeholder),1))]),_:1},8,["modelValue","options"]),l.value&&!e.value.status?(m(),v("small",pe,"Status is required.")):x("",!0)]),_:1})])])]),_:1},8,["visible"])])}}},Be=K(re,[["__scopeId","data-v-5f15d1c9"]]);export{Be as default};
